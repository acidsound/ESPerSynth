; PlatformIO Project Configuration File for ESPerSynth
; Mozzi Library Implementation (고급 사운드 합성)
;
; 빌드: pio run
; 업로드: pio run --target upload
; 시리얼 모니터: pio device monitor
; 한번에: pio run --target upload && pio device monitor

[env:esp32-c3-devkitm-1]
platform = espressif32
board = esp32-c3-devkitm-1
framework = arduino

; 라이브러리 의존성
lib_deps = 
    ; TR-808 메인 라이브러리
    https://github.com/acidsound/ESPerSynth.git
    ; Mozzi 사운드 합성 라이브러리
    sensorium/Mozzi@^2.0.0

; 빌드 플래그
build_flags = 
    ; 디버그 레벨
    -DCORE_DEBUG_LEVEL=3
    
    ; Mozzi 사용
    -DUSE_MOZZI
    
    ; Mozzi 설정
    -DMOZZI_AUDIO_RATE=32768
    -DMOZZI_CONTROL_RATE=256
    -DMOZZI_ESP32
    -DMOZZI_ANALOG_READ_RESOLUTION=12
    
    ; 오디오 설정
    -DSAMPLE_RATE=32768
    
    ; 성능 최적화
    -O3
    -ffast-math
    
    ; ESP32C3 특화
    -DBOARD_HAS_PSRAM
    -DARDUINO_USB_CDC_ON_BOOT=1

; 보드 설정
board_build.flash_mode = qio
board_build.f_flash = 80000000L
board_build.f_cpu = 160000000L

; 파티션 (큰 앱 크기)
board_build.partitions = huge_app.csv

; 업로드 설정
upload_speed = 921600
monitor_speed = 115200

; 시리얼 모니터 필터
monitor_filters = 
    esp32_exception_decoder
    time
